(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{384:function(e,t,a){e.exports=a.p+"assets/img/extension.e256de89.png"},492:function(e,t,a){"use strict";a.r(t);var s=a(10),o=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"apple-secure-boot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apple-secure-boot"}},[e._v("#")]),e._v(" Apple Secure Boot")]),e._v(" "),t("ul",[t("li",[e._v("Note: DmgLoading, SecureBootModel and ApECID require "),t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenCore 0.6.1"),t("OutboundLink")],1),e._v(" or newer")]),e._v(" "),t("li",[e._v("Note 2: macOS Big Sur requires OpenCore 0.6.3+ for proper Apple Secure Boot support")])]),e._v(" "),t("h2",{attrs:{id:"what-is-apple-secure-boot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-is-apple-secure-boot"}},[e._v("#")]),e._v(" What is Apple Secure Boot")]),e._v(" "),t("ul",[t("li",[e._v("Information based off of "),t("a",{attrs:{href:"https://applelife.ru/posts/905541",target:"_blank",rel:"noopener noreferrer"}},[e._v("vit9696's thread"),t("OutboundLink")],1),e._v(", "),t("a",{attrs:{href:"https://www.apple.com/euro/macbook-pro-13/docs/a/Apple_T2_Security_Chip_Overview.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apple's T2 docs"),t("OutboundLink")],1),e._v(" and "),t("a",{attrs:{href:"https://osy.gitbook.io/hac-mini-guide/details/secure-boot",target:"_blank",rel:"noopener noreferrer"}},[e._v("Osy's Secure Boot page"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("To best understand Apple Secure Boot, lets take a look at how the boot process works in Macs vs OpenCore in regards to security:")]),e._v(" "),t("p",[t("img",{attrs:{src:a(384),alt:""}})]),e._v(" "),t("p",[e._v("As we can see, there's several layers of trust incorporated into Apple Secure Boot:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("OpenCore will verify the boot.efi manifest (e.g. boot.efi.j137ap.im4m) to ensure that boot.efi was signed by Apple and can be used by this Secure Boot model.")]),e._v(" "),t("ul",[t("li",[e._v("For non-zero ApECID,  OpenCore will additionally verify the ECID value, written in the boot.efi manifest (e.g. boot.efi.j137ap.XXXXXXXX.im4m), to ensure that a compromised hard drive from a different machine with the same Secure Boot model cannot be used in your computer.")])])]),e._v(" "),t("li",[t("p",[e._v("boot.efi will verify the kernelcache to ensure it has not been tampered with")])]),e._v(" "),t("li",[t("p",[e._v("apfs.kext and AppleImage4 ensure your System Volume's snapshot has not been tampered with(Only applicable with Big Sur+)")])])]),e._v(" "),t("p",[e._v("Not all of these verifications are required to boot, but they're all possible for those who want maximum security. Currently information regarding firmware-based Secure Boot is not covered however all Apple Secure Boot options are detailed below.")]),e._v(" "),t("h2",{attrs:{id:"dmgloading"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dmgloading"}},[e._v("#")]),e._v(" DmgLoading")]),e._v(" "),t("p",[e._v("Quite a simple setting however important in regards to Apple Secure Boot. This setting allows you to set load policy with DMGs in OpenCore. By default we recommend using "),t("code",[e._v("Signed")]),e._v(" however for best security  "),t("code",[e._v("Disabled")]),e._v(" may be preferred.")]),e._v(" "),t("p",[e._v("Possible options for "),t("code",[e._v("Misc -> Security -> DmgLoading")]),e._v(":")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Value")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Comment")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Any")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Allows all DMGs to load in OpenCore, however this option will cause a boot failure if Apple Secure Boot is enabled")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Signed")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Allows only Apple-signed DMGs like macOS installers to load")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Disabled")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Disables all external DMG loading, however internal recovery is still allowed with this option")])])])]),e._v(" "),t("h2",{attrs:{id:"securebootmodel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#securebootmodel"}},[e._v("#")]),e._v(" SecureBootModel")]),e._v(" "),t("p",[e._v("SecureBootModel is used set the Apple Secure Boot hardware model and policy, allowing us to enable Apple's Secure Boot with any SMBIOS even if the original SMBIOS did not support it(ie. no T2 present on pre-2017 SMBIOS). Enabling SecureBootModel is the equivalent of "),t("a",{attrs:{href:"https://support.apple.com/HT208330",target:"_blank",rel:"noopener noreferrer"}},[e._v('"Medium Security"'),t("OutboundLink")],1),e._v(", for Full Security please see "),t("a",{attrs:{href:"#apecid"}},[e._v("ApECID")])]),e._v(" "),t("p",[e._v("Currently the following options for "),t("code",[e._v("Misc -> Security -> SecureBootModel")]),e._v(" are supported:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Value")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("SMBIOS")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Minimum macOS Version")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Disabled")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("No model, Secure Boot will be disabled.")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("N/A")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Default")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Currently set to x86legacy")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("11.0.1 (20B29)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j137")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("iMacPro1,1 (December 2017)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.13.2 (17C2111)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j680")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookPro15,1 (July 2018)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.13.6 (17G2112)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j132")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookPro15,2 (July 2018)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.13.6 (17G2112)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j174")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Macmini8,1 (October 2018)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.14 (18A2063)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j140k")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookAir8,1 (October 2018)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.14.1 (18B2084)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j780")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookPro15,3 (May 2019)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.14.5 (18F132)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j213")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookPro15,4 (July 2019)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.14.5 (18F2058)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j140a")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookAir8,2 (July 2019)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.14.5 (18F2058)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j152f")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookPro16,1 (November 2019)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.15.1 (19B2093)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j160")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacPro7,1 (December 2019)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.15.1 (19B88)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j230k")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookAir9,1 (March 2020)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.15.3 (19D2064)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j214k")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookPro16,2 (May 2020)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.15.4 (19E2269)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j223")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookPro16,3 (May 2020)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.15.4 (19E2265)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j215")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("MacBookPro16,4 (June 2020)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.15.5 (19F96)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j185")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("iMac20,1 (August 2020)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.15.6 (19G2005)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("j185f")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("iMac20,2 (August 2020)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("10.15.6 (19G2005)")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("x86legacy")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Non-T2 Macs in 11.0(Recommended for VMs)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("11.0.1 (20B29)")])])])]),e._v(" "),t("h3",{attrs:{id:"special-notes-with-securebootmodel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#special-notes-with-securebootmodel"}},[e._v("#")]),e._v(" Special Notes with SecureBootModel")]),e._v(" "),t("ul",[t("li",[e._v("The "),t("code",[e._v("Default")]),e._v(" value is not recommended as if you plan to use this with ApECID for full security, we recommend setting a proper value (i.e. closest to your SMBIOS or versions of macOS you plan to boot) since the "),t("code",[e._v("Default")]),e._v(" value is likely to be updated in the future.\n"),t("ul",[t("li",[e._v("In addition, "),t("code",[e._v("Default")]),e._v(" is set to "),t("code",[e._v("x86legacy")]),e._v(" which will breaking booting High Sierra through Catalina.")]),e._v(" "),t("li",[t("code",[e._v("x86legacy")]),e._v(" is not required for normal Mac models without T2's, any of the above values are supported.")])])]),e._v(" "),t("li",[e._v("The list of cached drivers may be different, resulting in the need to change the list of Added or Forced kernel drivers.\n"),t("ul",[t("li",[e._v("ie. IO80211Family cannot be injected in this case, as it is already present in the kernelcache")])])]),e._v(" "),t("li",[e._v("Unsigned and several signed kernel drivers cannot be used\n"),t("ul",[t("li",[e._v("This includes Nvidia's Web Drivers in 10.13")])])]),e._v(" "),t("li",[e._v("System volume alterations on operating systems with sealing, like macOS 11, may result in the operating system being unbootable.\n"),t("ul",[t("li",[e._v("If you plan to disable macOS's APFS snapshots, please remember to disable SecureBootModel as well")])])]),e._v(" "),t("li",[e._v("Certain boot errors are more likely to be triggered with Secure Boot enabled that were previously not required\n"),t("ul",[t("li",[e._v("Commonly seen with certain APTIO IV systems where they may not require IgnoreInvalidFlexRatio and HashServices initially however Secure Boot does.")])])]),e._v(" "),t("li",[e._v("On older CPUs (ie. before Sandy Bridge) enabling Apple Secure Boot might cause slightly slower loading by up to 1 second")]),e._v(" "),t("li",[e._v("Operating systems released before Apple Secure Boot landed (ie. macOS 10.12 or earlier) will still boot until UEFI Secure Boot is enabled. This is so,\n"),t("ul",[t("li",[e._v("This is due to Apple Secure Boot assuming they are incompatible and will be handled by the firmware just like Microsoft Windows is")])])]),e._v(" "),t("li",[e._v("Virtual Machines will want to use "),t("code",[e._v("x86legacy")]),e._v(" for Secure Boot support\n"),t("ul",[t("li",[e._v("Note using any other model will require "),t("code",[e._v("ForceSecureBootScheme")]),e._v(" enabled")])])])]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("Troubleshooting")]),e._v(" "),t("p",[e._v("Due to an annoying bug on Apple's end, certain systems may be missing the secure boot files themselves on the drive. Because of this, you may get issues such as:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("OCB: LoadImage failed - Security Violation\n")])])]),t("p",[e._v("To resolve, run the following in macOS:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# First, find your Preboot volume")]),e._v("\ndiskutil list\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# From the below list, we can see our Preboot volume is disk5s2")]),e._v("\n/dev/disk5 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("synthesized"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(":\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#:                       TYPE NAME                    SIZE       IDENTIFIER")]),e._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(":      APFS Container Scheme -                      +255.7 GB   disk5\n                                 Physical Store disk4s2\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(":                APFS Volume ⁨Big Sur HD - Data⁩       "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("122.5")]),e._v(" GB   disk5s1\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(":                APFS Volume ⁨Preboot⁩                 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("309.4")]),e._v(" MB   disk5s2\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v(":                APFS Volume ⁨Recovery⁩                "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("887.8")]),e._v(" MB   disk5s3\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("4")]),e._v(":                APFS Volume ⁨VM⁩                      "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v(" MB     disk5s4\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5")]),e._v(":                APFS Volume ⁨Big Sur HD⁩              "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("16.2")]),e._v(" GB    disk5s5\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("6")]),e._v(":              APFS Snapshot ⁨com.apple.os.update-"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".⁩ "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("16.2")]),e._v(" GB    disk5s5s\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Now mount the Preboot volume")]),e._v("\ndiskutil "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mount")]),e._v(" disk5s2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# CD into your Preboot volume")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Note the actual volume is under /System/Volumes/Preboot in macOS")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# however in Recovery it's simply under /Volumes/Preboot")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /System/Volumes/Preboot\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Grab your UUID")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ls")]),e._v("\n 46923F6E-968E-46E9-AC6D-9E6141DF52FD\n CD844C38-1A25-48D5-9388-5D62AA46CFB8\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# If multiple show up(ie. you dual boot multiple versions of macOS), you will")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# need to determine which UUID is correct.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Easiest way to determine is printing the value of .disk_label.contentDetails")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# of each volume.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" ./46923F6E-968E-46E9-AC6D-9E6141DF52FD/System/Library/CoreServices/.disk_label.contentDetails\n Big Sur HD%\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" ./CD844C38-1A25-48D5-9388-5D62AA46CFB8/System/Library/CoreServices/.disk_label.contentDetails\n Catalina HD%\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Next lets copy over the secure boot files, recovery will need different commands")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Example commands for inside macOS")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Replace CD844C38-1A25-48D5-9388-5D62AA46CFB8 with your UUID value")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" ~\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-a")]),e._v(" /usr/standalone/i386/. /System/Volumes/Preboot/CD844C38-1A25-48D5-9388-5D62AA46CFB8/System/Library/CoreServices\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Example commands for Recovery")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Replace Macintosh\\ HD and CD844C38-1A25-48D5-9388-5D62AA46CFB8 with")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# your System Volume's name and Preboot's UUID")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-a")]),e._v(" /Volumes/Macintosh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v(" HD/usr/standalone/i386/. /Volumes/Preboot/CD844C38-1A25-48D5-9388-5D62AA46CFB8/System/Library/CoreServices\n")])])]),t("p",[e._v("Now you can enable SecureBootModel and reboot without issue! And since we're not editing the system volume itself we don't need to worry about disabling SIP or breaking macOS snapshots.")])]),e._v(" "),t("h2",{attrs:{id:"apecid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apecid"}},[e._v("#")]),e._v(" ApECID")]),e._v(" "),t("p",[e._v("ApECID is used as an Apple Enclave Identifier, what this means is it allows us to use  personalized Apple Secure Boot identifiers and achieve "),t("a",{attrs:{href:"https://support.apple.com/HT208330",target:"_blank",rel:"noopener noreferrer"}},[e._v('"Full Security"'),t("OutboundLink")],1),e._v(" as per Apple's secure boot page(when paired with SecureBootModel).")]),e._v(" "),t("p",[e._v("To generate your own ApECID value, you'll want some form of cryptographically secure random number generator that will output a 64-bit integer. Below we provide an example that can be run if "),t("a",{attrs:{href:"https://www.python.org/downloads/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python 3"),t("OutboundLink")],1),e._v(" is installed on your machine:")]),e._v(" "),t("div",{staticClass:"language-py extra-class"},[t("pre",{pre:!0,attrs:{class:"language-py"}},[t("code",[e._v("python3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("c "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'import secrets; print(secrets.randbits(64))'")]),e._v("\n")])])]),t("p",[e._v("With this unique 64-bit int, you can now enter it under Misc -> ApECID in your config.plist")]),e._v(" "),t("p",[e._v("However before setting ApECID, there's a few things we need to note:")]),e._v(" "),t("ul",[t("li",[e._v("Fresh installs with ApECID set to a non-zero value will require a network connection at install time for verification")]),e._v(" "),t("li",[e._v("SecureBootModel should have a defined value instead of "),t("code",[e._v("Default")]),e._v(" to avoid issues if the value were to change in later OpenCore versions.")]),e._v(" "),t("li",[e._v("Pre-existing installs will need to personalize the volume, for this you'll need to first reboot into recovery and run the following command(Replace "),t("code",[e._v("Macintosh HD")]),e._v(" with your system's volume name):")])]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Run this command after setting your ApECID value")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# You'll also need an active network connection in recovery to run this command")]),e._v("\nbless "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--folder")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/Volumes/Macintosh HD/System/Library/CoreServices"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--bootefi")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--personalize")]),e._v("\n")])])]),t("p",[e._v('And something to note when reinstalling macOS 10.15 or older is that you may receive "Unable to verify macOS" error message. To work around this issue, you\'ll want to allocate a dedicated RAM disk of 2 MBs for macOS personalization by entering the following commands in the macOS recovery terminal before starting the installation:')]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("disk")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),e._v("hdiutil attach "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-nomount")]),e._v(" ram://4096"),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v("\ndiskutil erasevolume HFS+ SecureBoot "),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$disk")]),e._v("\ndiskutil unmount "),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$disk")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" /var/tmp/OSPersonalizationTemp\ndiskutil "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mount")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-mountpoint")]),e._v(" /var/tmp/OSPersonalizationTemp "),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$disk")]),e._v("\n")])])])])}),[],!1,null,null,null);t.default=o.exports}}]);